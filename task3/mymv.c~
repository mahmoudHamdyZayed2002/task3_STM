#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

void move_data_fn(void);
int fd1,fd2,count_read,count_write;
char buf[100];
int main(int argc , char *argv[]){
	printf("argc = %d\n",argc);
	if(argc == 3){
		fd1 = open(argv[1],O_RDONLY);
        	if(fd1 < 0){
                	printf("this directory is not found\n");
               		 return -1;
       		 }
       		 fd2 = open(argv[2],O_RDWR|O_TRUNC | O_CREAT,0644);
       		 if(fd2 < 0){
               		 printf("cant creat destination\n");
               		 return -1;
       		 }
		move_data_fn();

	}
	if(argc ==4){
		fd1 = open(argv[2],O_RDONLY);
       		 if(fd1 < 0){
               		 printf("this directory is not found\n");
        	        return -1;
       		 }
       		 fd2 = open(argv[3],O_RDWR|O_TRUNC | O_CREAT,0644);
       		 if(fd2 < 0){
               		 printf("cant creat destination\n");
               		 return -1;
       		 }
		 if(argv[1][1]=='i'){
			printf("prombit Y , N \n");
			char ans;
			scanf("%c",&ans);
			if ((ans == 'y')||(ans=='Y')){
				move_data_fn();
			}
			else if((ans == 'n')||(ans=='N')){
				printf("cant move data\n");
			 }
		}
		 else if(argv[1][1]=='n'){
			printf("cant move data\n");
                 }
		 else if(argv[1][1]=='f'){
                	printf("foce to overriting\n");
			 move_data_fn();

                 }


	}
	close(fd1);close(fd2);
	return 0;
}
void move_data_fn(void){
	while(( count_read=read(fd1,buf,100))!=0){
                if(count_read <0){
                         printf("error222");
                         break;
                }
                count_write=write(fd2,buf,count_read);
                count_write=write(1,buf,count_read);

        }
}

